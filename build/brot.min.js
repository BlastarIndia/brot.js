/*! brot.js - v0.0.1 */
!function(a,b,c){function d(c,f){if(!b[c]){if(!a[c]){var g="function"==typeof require&&require;if(!f&&g)return g(c,!0);if(e)return e(c,!0);throw new Error("Cannot find module '"+c+"'")}var h=b[c]={exports:{}};a[c][0].call(h.exports,function(b){var e=a[c][1][b];return d(e?e:b)},h,h.exports)}return b[c].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a){!function(){"use strict";a("./polyfills");var b=a("./buddhabrot");window.onload=function(){var a=document.getElementById("main");a.width=window.innerWidth,a.height=window.innerHeight;var c=a.width,d=a.height,e=a.getContext("2d"),f=new b({width:c,height:d,batched:!0}),g=function(){f.complete?console.log("complete"):requestAnimationFrame(g);var b=f.getImage();if(b){for(var c=e.createImageData(a.width,a.height),d=c.data,h=c.width*c.height,i=0;h>i;i++){var j=4*i;d[j+1]=255*b[i],d[j+2]=255*b[i],d[j+3]=255}e.putImageData(c,0,0)}};f.run(g),requestAnimationFrame(g)}}()},{"./buddhabrot":2,"./polyfills":6}],2:[function(a,b){!function(){"use strict";var c=a("./buddhaconfig"),d=a("./buddhadata"),e=a("./complex"),f=function(a){return this instanceof f?(this.config=new c(a),this.config.computeConfig(),this.data=new d(this.config),this.callback=a.callback||function(){},this.i=0,this.allocated=!1,this.complete=!1,void 0):new f(a)};f.prototype.run=function(a){this.callback=a||this.callback,this.data.allocate(),this.allocated=!0,this.config.batched?setTimeout(this._scheduleBatch.bind(this)):(this._computeTrajectories(),this.callback(this.getImage()))},f.prototype.getImage=function(){return this.allocated?this.data.normedImage:void 0},f.prototype._scheduleBatch=function(){this._computeTrajectories(),this.complete?this.callback(this.getImage()):setTimeout(this._scheduleBatch.bind(this))},f.prototype._computeTrajectories=function(){for(var a,b,c=this.i,d=this.config.iterations,e=c+this.config.batchSize,f=d>e?e:d,g=this.config.xstart,h=this.config.xlength,i=this.config.ystart,j=this.config.ylength;f>c;c++)a=g+Math.random()*h,b=i+Math.random()*j,this._traceTrajectory(a,b);this.i=c,this.data.normalizeImage(),this.i===d&&(this.complete=!0)},f.prototype._traceTrajectory=function(a,b){for(var c=e(b,a),d=c.clone(),f=0,g=this.config.maxEscapeIter,h=this.data;this._isBounded(c)&&g>f;)h.cacheTrajectory(c,f),c=c.isquared().iadd(d),f++;this._checkCriteria(f)&&h.saveTrajectory(f)},f.prototype._isBounded=function(a){return!(a.real<this.config.ystart||a.real>this.config.yend||a.imag<this.config.xstart||a.imag>this.config.xend)},f.prototype._checkCriteria=function(a){return this.config.anti?a===this.config.maxEscapeIter:a<this.config.maxEscapeIter},b.exports=f}()},{"./buddhaconfig":3,"./buddhadata":4,"./complex":5}],3:[function(a,b){!function(){"use strict";var a=function(b){return this instanceof a?(this.width=b.width||b.w,this.height=b.height||b.h,this.iterations=b.iterations||1e9,this.maxEscapeIter=b.maxEscapeIter||b.max||20,this.batched=b.batch===!1?!1:!0,this.batchSize=(b.batchSize<0?null:b.batchSize)||5e4,this.anti=b.anti||!1,this.batched||(this.batchSize=this.iterations),void 0):new a(b)};a.prototype.computeConfig=function(){var a=4,b=8;this.pixels=this.width*this.height,this.imageProcBytes=this.pixels*a+this.pixels*b,this.bufLength=2*(this.pixels*a+this.pixels*b);for(var c=this.bufLength-this.imageProcBytes;c<2*this.maxEscapeIter*b;)this.bufLength=2*this.bufLength,c=this.bufLength-this.imageProcBytes;this.imageStart=0,this.imageLength=this.pixels,this.normedImageStart=this.imageLength*a,this.normedImageLength=this.pixels,this.cacheStart=this.imageLength*a+this.normedImageLength*b,this.cacheLength=(this.bufLength-this.cacheStart)/b;var d=-2.5,e=1,f=-1,g=1,h=e-d,i=g-f,j=h/i,k=this.height/this.width;j>=k?(this.ystart=d,this.ylength=h,this.xlength=this.ylength/k,this.xstart=0-this.xlength/2):(this.xstart=f,this.xlength=i,this.ylength=this.xlength*k,this.ystart=d+h/2-this.ylength/2),this.xend=this.xstart+this.xlength,this.yend=this.ystart+this.ylength,this.dx=this.xlength/this.width,this.dy=this.ylength/this.height,this.initialized=!0},b.exports=a}()},{}],4:[function(a,b){!function(){!function(){"use strict";var a=function(b){return this instanceof a?(this.config=b,this.normalizer=0,void 0):new a(b)};a.prototype.allocate=function(){if(!this.config.initialized)throw"BuddhaConfig has not been initialized";this.buf=new ArrayBuffer(this.config.bufLength),this.image=new Int32Array(this.buf,this.config.imageStart,this.config.imageLength),this.normedImage=new Float64Array(this.buf,this.config.normedImageStart,this.config.normedImageLength),this.cache=new Float64Array(this.buf,this.config.cacheStart,this.config.cacheLength)},a.prototype.normalizeImage=function(){for(var a=this.normalizer||1,b=0;b<this.config.pixels;b++)this.normedImage[b]=this.image[b]/a},a.prototype.cacheTrajectory=function(a,b){var c=2*b;this.cache[c]=a.real,this.cache[c+1]=a.imag},a.prototype.saveTrajectory=function(a){var b,c,d,e,f,g,h,i,j=this.config.xstart,k=this.config.xend,l=this.config.ystart,m=this.config.yend,n=this.config.dx,o=this.config.dy,p=this.config.width;for(b=0;a>b;b++)c=2*b,e=this.cache[c],d=this.cache[c+1],j>d||d>k||l>e||e>m||(f=0|(e-l)/o,g=0|(d-j)/n,h=f*p+g,i=++this.image[h],this.normalizer<i&&(this.normalizer=i))},b.exports=a}()}()},{}],5:[function(a,b){!function(){"use strict";var a=function(b,c){return this instanceof a?(this.real=Number(b)||0,this.imag=Number(c)||0,void 0):new a(b,c)};a.prototype.clone=function(){return new a(this.real,this.imag)},a.toComplex=function(b){return b instanceof a?b:new a(Number(b)||0,0)},a.prototype.add=function(a){return this.clone().iadd(a)},a.prototype.iadd=function(b){return b=a.toComplex(b),this.real=this.real+b.real,this.imag=this.imag+b.imag,this},a.prototype.sub=function(a){return this.clone().isub(a)},a.prototype.isub=function(b){return b=a.toComplex(b),this.real=this.real-b.real,this.imag=this.imag-b.imag,this},a.prototype.mult=function(a){return this.clone().imult(a)},a.prototype.imult=function(b){b=a.toComplex(b);var c=this.real*b.real-this.imag*b.imag,d=this.imag*b.real+this.real*b.imag;return this.real=c,this.imag=d,this},a.prototype.div=function(a){return this.clone().idiv(a)},a.prototype.idiv=function(b){b=a.toComplex(b);var c=b.real*b.real+b.imag*b.imag,d=(this.real*b.real+this.imag*b.imag)/c,e=(this.imag*b.real-this.real*b.imag)/c;return this.real=d,this.imag=e,this},a.prototype.conjugate=function(){return this.clone().iconjugate()},a.prototype.iconjugate=function(){return this.imag=-this.imag,this},a.prototype.abs=function(){return Math.sqrt(this.real*this.real+this.imag*this.imag)},a.prototype.pow=function(a){return this.clone().ipow(a)},a.prototype.ipow=function(a){var b,c;if(a=Number(a)||0,0===a)this.real=1,this.imag=0;else if(0>a){for(a=-a,c=this.clone(),b=1;a>b;b++)c.imult(this);this.real=1,this.imag=0,this.idiv(c)}else{for(c=this.clone(),b=1;a>b;b++)c.imult(this);this.real=c.real,this.imag=c.imag}return this},a.prototype.squared=function(){return this.clone().ipow(2)},a.prototype.isquared=function(){return this.ipow(2)},b.exports=a}()},{}],6:[function(){!function(){"use strict";!function(){var a,b=0,c=["ms","moz","webkit","o"];for(a=0;a<c.length&&!window.requestAnimationFrame;a++)window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var c=(new Date).getTime(),d=Math.max(0,16-(c-b)),e=setTimeout(function(){a(c+d)},d);return b=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(){"bind"in Function.prototype||(Function.prototype.bind=function(a){var b=Array.prototype.splice,c=b.call(arguments,1),d=this,e=function(){var f=c.concat(b.call(arguments,0));return this instanceof e?(d.apply(this,f),void 0):d.apply(a,f)};return e.prototype=d.prototype,e})}()}()},{}]},{},[1]);
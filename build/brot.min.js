/*! brot.js - v0.0.1 */
!function(a,b,c){function d(c,f){if(!b[c]){if(!a[c]){var g="function"==typeof require&&require;if(!f&&g)return g(c,!0);if(e)return e(c,!0);throw new Error("Cannot find module '"+c+"'")}var h=b[c]={exports:{}};a[c][0].call(h.exports,function(b){var e=a[c][1][b];return d(e?e:b)},h,h.exports)}return b[c].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a){!function(){"use strict";a("./polyfills");var b=a("./buddhabrot");window.onload=function(){var a=document.getElementById("main");a.width=window.innerWidth,a.height=window.innerHeight;var c=a.width,d=a.height,e=a.getContext("2d"),f=e.createImageData(a.width,a.height),g=new b({width:c,height:d,batched:!0}),h=function(){g.complete?console.log("complete"):requestAnimationFrame(h);var a=g.getImage();if(a){for(var b=f.data,c=f.width*f.height,d=0;c>d;d++){var i=4*d;b[i+1]=255*a[d],b[i+2]=255*a[d],b[i+3]=255}e.putImageData(f,0,0)}};g.run(),requestAnimationFrame(h)}}()},{"./buddhabrot":2,"./polyfills":5}],2:[function(a,b){!function(){"use strict";var c=a("./buddhaconfig"),d=a("./buddhadata"),e=function(a){return this instanceof e?(this.config=new c(a),this.config.computeConfig(),this.data=new d(this.config),this.callback=a.callback||function(){},this.i=0,this.allocated=!1,this.complete=!1,this._scheduleBatchBound=this._scheduleBatch.bind(this),void 0):new e(a)};e.prototype.run=function(a){this.callback=a||this.callback,this.data.allocate(),this.allocated=!0,this.config.batched?setTimeout(this._scheduleBatchBound):(this._computeTrajectories(),this.callback(this.getImage()))},e.prototype.getImage=function(){return this.allocated?this.data.normedImage:void 0},e.prototype._scheduleBatch=function(){this._computeTrajectories(),this.complete?this.callback(this.getImage()):setTimeout(this._scheduleBatchBound)},e.prototype._computeTrajectories=function(){for(var a,b,c=this.i,d=this.config.iterations,e=c+this.config.batchSize,f=d>e?e:d,g=this.config.xstart,h=this.config.xlength,i=this.config.ystart,j=this.config.ylength;f>c;c++)a=g+Math.random()*h,b=i+Math.random()*j,this._traceTrajectory(a,b);this.i=c,this.data.normalizeImage(),this.i===d&&(this.complete=!0)},e.prototype._traceTrajectory=function(a,b){for(var c,d,e=b,f=a,g=e,h=f,i=0,j=this.config.maxEscapeIter,k=this.data;this._isBounded(e,f)&&j>i;)k.cacheTrajectory(e,f,i),c=e*e-f*f+g,d=2*f*e+h,e=c,f=d,i++;this._checkCriteria(i)&&k.saveTrajectory(i)},e.prototype._isBounded=function(a,b){return!(a<this.config.ystart||a>this.config.yend||b<this.config.xstart||b>this.config.xend)},e.prototype._checkCriteria=function(a){return this.config.anti?a===this.config.maxEscapeIter:a<this.config.maxEscapeIter},b.exports=e}()},{"./buddhaconfig":3,"./buddhadata":4}],3:[function(a,b){!function(){"use strict";var a=function(b){return this instanceof a?(this.width=b.width||b.w,this.height=b.height||b.h,this.iterations=b.iterations||1e9,this.maxEscapeIter=b.maxEscapeIter||b.max||20,this.batched=b.batch===!1?!1:!0,this.batchSize=(b.batchSize<0?null:b.batchSize)||5e4,this.anti=b.anti||!1,this.batched||(this.batchSize=this.iterations),void 0):new a(b)};a.prototype.computeConfig=function(){var a=4,b=8;this.pixels=this.width*this.height,this.imageProcBytes=this.pixels*a+this.pixels*b,this.bufLength=2*(this.pixels*a+this.pixels*b);for(var c=this.bufLength-this.imageProcBytes;c<2*this.maxEscapeIter*b;)this.bufLength=2*this.bufLength,c=this.bufLength-this.imageProcBytes;this.imageStart=0,this.imageLength=this.pixels,this.normedImageStart=this.imageLength*a,this.normedImageLength=this.pixels,this.cacheStart=this.imageLength*a+this.normedImageLength*b,this.cacheLength=(this.bufLength-this.cacheStart)/b;var d=-2.5,e=1,f=-1,g=1,h=e-d,i=g-f,j=h/i,k=this.height/this.width;j>=k?(this.ystart=d,this.ylength=h,this.xlength=this.ylength/k,this.xstart=0-this.xlength/2):(this.xstart=f,this.xlength=i,this.ylength=this.xlength*k,this.ystart=d+h/2-this.ylength/2),this.xend=this.xstart+this.xlength,this.yend=this.ystart+this.ylength,this.dx=this.xlength/this.width,this.dy=this.ylength/this.height,this.initialized=!0},b.exports=a}()},{}],4:[function(a,b){!function(){!function(){"use strict";var a=function(b){return this instanceof a?(this.config=b,this.normalizer=0,void 0):new a(b)};a.prototype.allocate=function(){if(!this.config.initialized)throw"BuddhaConfig has not been initialized";this.buf=new ArrayBuffer(this.config.bufLength),this.image=new Int32Array(this.buf,this.config.imageStart,this.config.imageLength),this.normedImage=new Float64Array(this.buf,this.config.normedImageStart,this.config.normedImageLength),this.cache=new Float64Array(this.buf,this.config.cacheStart,this.config.cacheLength)},a.prototype.normalizeImage=function(){var a,b,c=this.normalizer||1;for(a=0,b=this.config.pixels;b>a;a++)this.normedImage[a]=this.image[a]/c},a.prototype.cacheTrajectory=function(a,b,c){var d=2*c;this.cache[d]=a,this.cache[d+1]=b},a.prototype.saveTrajectory=function(a){var b,c,d,e,f,g,h,i,j=this.config.xstart,k=this.config.xend,l=this.config.ystart,m=this.config.yend,n=this.config.dx,o=this.config.dy,p=this.config.width;for(b=0;a>b;b++)c=2*b,e=this.cache[c],d=this.cache[c+1],j>d||d>k||l>e||e>m||(f=0|(e-l)/o,g=0|(d-j)/n,h=f*p+g,i=++this.image[h],this.normalizer<i&&(this.normalizer=i))},b.exports=a}()}()},{}],5:[function(){!function(){"use strict";!function(){var a,b=0,c=["ms","moz","webkit","o"];for(a=0;a<c.length&&!window.requestAnimationFrame;a++)window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var c=(new Date).getTime(),d=Math.max(0,16-(c-b)),e=setTimeout(function(){a(c+d)},d);return b=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(){"bind"in Function.prototype||(Function.prototype.bind=function(a){var b=Array.prototype.splice,c=b.call(arguments,1),d=this,e=function(){var f=c.concat(b.call(arguments,0));return this instanceof e?(d.apply(this,f),void 0):d.apply(a,f)};return e.prototype=d.prototype,e})}()}()},{}]},{},[1]);